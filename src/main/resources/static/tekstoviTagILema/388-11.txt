DataSuppliera	DataSuppliera	Npmsn
(	(	Z
dobavljač	dobavljač	Ncmsn
energenata	energent	Ncmpg
,	,	Z
računa	račun	Ncmpg
,	,	Z
podataka	podatak	Ncmpg
o	o	Sl
daljinskim	daljinski	Agpnply
očitanjima	očitanje	Ncnpl
)	)	Z
spoji	spojiti	Vmr3s
na	na	Sa
Oracle	oracli	Agpfsay
shemu	shema	Ncfsa
koja	koji	Pi-fsn
joj	on	Pp3fsd
je	biti	Var3s
dodijeljena	dodijeliti	Appfsny
te	te	Cc
pozivom	poziv	Ncmsi
PL	PL	Npmsn
/	/	Z
SQL	sq	Agpfpgy
procedura	procedura	Ncfpg
i	i	Cc
funkcija	funkcija	Ncfsn
šalje	slati	Vmr3s
podatke	podatak	Ncmpa
u	u	Sa
sustav	sustav	Ncmsan
.	.	Z

Procedura	procedura	Ncfsn
slanja	slanje	Ncnsg
podataka	podatak	Ncmpg
sastoji	sastojati	Vmr3s
se	sebe	Px--sa
od	od	Sg
sljedećih	sljedeći	Agpmpgy
koraka	korak	Ncmpg
:	:	Z

1.	1.	Mdo
Spajanje	spajanje	Ncnsn
na	na	Sa
Oracle	Oracle	Pd-fsa
bazu	baza	Ncfsa

2.	2.	Mdo
Autorizacija	autorizacija	Ncfsn
na	na	Sa
sustav	sustav	Ncmsan
za	za	Sa
energetski	energetski	Agpmsayn
management	management	Ncmsan

3.	3.	Mdo
Slanje	slanje	Ncnsn
podataka	podatak	Ncmpg

a.	ai	Agpnsny
Slanje	slanje	Ncnsn
podataka	podatak	Ncmpg
o	o	Sl
daljinskim	daljinski	Agpnply
očitanjima	očitanje	Ncnpl

b.	bi	Agpnsny
Slanje	slanje	Ncnsn
podataka	podatak	Ncmpg
o	o	Sl
računima	račun	Ncmpl

i.	ii	Agpnsny
Slanje	slanje	Ncnsn
podataka	podatak	Ncmpg
o	o	Sl
stavkama	stavka	Ncfpl
računa	račun	Ncmsg

Slanje	slanje	Ncnsn
podataka	podatak	Ncmpg
o	o	Sl
daljinskim	daljinski	Agpnply
očitanjima	očitanje	Ncnpl
je	biti	Var3s
neovisno	neovisan	Agpnsny
od	od	Sg
slanja	slanje	Ncnsg
podataka	podatak	Ncmpg
o	o	Sl
računima	račun	Ncmpl
i	i	Cc
stavkama	stavka	Ncfpl
računa	račun	Ncmsg
.	.	Z

Spajanje	spajanje	Ncnsn
na	na	Sa
Oracle	Oracle	Pd-fsa
bazu	baza	Ncfsa

Spajanje	spajanje	Ncnsn
na	na	Sa
Oracle	Oracle	Pd-fsa
bazu	baza	Ncfsa
se	sebe	Px--sa
dogovara	dogovarati	Vmr3s
s	sa	Si
mrežnim	mrežni	Agpmsiy
IT	IT	Agpmsiy
administratorom	administrator	Ncmsi
koji	koji	Pi-msn
uspostavlja	uspostavljati	Vmr3s
VPN	vpi	Agpfsay
konekciju	konekcija	Ncfsa
ili	ili	Cc
neku	neki	Pi-fsa
drugu	drugi	Mlofsa
metodu	metoda	Ncfsa
mrežnog	mrežni	Agpmsgy
pristupa	pristup	Ncmsg
Oracle	Oracla	Npfsg
serveru	server	Ncmsd
.	.	Z

Administrator	administrator	Ncmsn
Oraclea	Oracle	Npmsg
mora	morati	Vmr3s
kreirati	kreirati	Vmn
Oracle	Oracle	Npmsan
usera	usbac	Ncmsan
na	na	Sa
kojeg	koji	Pi-msay
će	htjeti	Var3s
se	sebe	Px--sa
DataSupplier	DataSupplier	Npmsn
spajati	spajati	Vmn
.	.	Z

Oracle	oracla	Ncfpn
user	user	Sg
mora	more	Ncnsg
dobiti	dobiti	Vmn
grant	Grant	Ncmsan
na	na	Sa
rolu	rola	Ncfsa
REMOTE_1	REMOTE_1	Qr
.	.	Z

Ta	taj	Pd-fsn
rola	rola	Ncfsn
ima	imati	Vmr3s
select	select	Agpmsayn
pristup	pristup	Ncmsan
na	na	Sl
VREMOTE_	vremotea	Ncfsl
%	%	Z
viewove	view	Ncmpa
i	i	Cc
execute	execivati	Vmr3s
rolu	rola	Ncfsa
na	na	Sa
remote	remote	Agpmsayn
paket	paket	Ncmsan
.	.	Z

DataSupplier	DataSupplier	Npmsn
će	htjeti	Var3s
na	na	Sa
raspolaganje	raspolaganje	Ncnsa
dobiti	dobiti	Vmn
Oracle	Oracle	Pq3n-n
shemu	shema	Ncfsa
s	sa	Si
pristupnim	pristupni	Agpmpiy
podacima	podatak	Ncmpi
.	.	Z

sqlplus	sqlplus	X
datasuplier_oracle_user	datasuplier_oracle_user	X
/	/	Z
password@oracledatabase	password@oracledatabasa	Ncfsg

Nakon	nakon	Sg
spajanja	spajanje	Ncnsg
na	na	Sa
Oracle	Oracle	Pi-msan
shemu	shema	Ncfsa
potrebno	potreban	Agpnsny
je	biti	Var3s
izvršiti	izvršiti	Vmn
autorizaciju	autorizacija	Ncfsa
na	na	Sa
ISGE	ISGE	Pi-msan
sustav	sustav	Ncmsan
za	za	Sa
energetski	energetski	Agpmsayn
management	management	Ncmsan
.	.	Z

Autorizacija	autorizacija	Ncfsn
na	na	Sa
ISGE	isge	Agpmsayn
sustav	sustav	Ncmsan

Sustav	sustav	Ncmsn
je	biti	Var3s
koncipiran	koncipirati	Appmsnn
na	na	Sa
način	način	Ncmsan
da	da	Cs
nakon	nakon	Cs
što	što	Cs
se	sebe	Px--sa
klijentska	klijentski	Agpfsny
aplikacija	aplikacija	Ncfsn
DataSuppliera	DataSupplier	Npmsg
ulogira	ulogirati	Vmr3s
na	na	Sa
Oracle	oracla	Ncfpa
,	,	Z
mora	morati	Vmr3s
dodatno	dodatno	Rgp
autorizirati	autorizirati	Vmn
putem	put	Sg
poziva	poziv	Ncmsg
PL	PL	Npmsn
/	/	Z
SQL	sqi	Agpfpay
procedure	procedura	Ncfpa
.	.	Z

exec	exec	Npmsn
remote	remoti	Vmr2p
.	.	Z
authorize_datasupplier	authorize_datasupplier	Ncmsn
(	(	Z
‘	‘	Z
datasupplier_login	datasupplier_login	Ncmsn
’	’	Z
,	,	Z
’	’	Z
password	password	Ncmsan
’	’	Z
,	,	Z
’	’	Z
HR	HR	Y
’	’	Z
)	)	Z
;	;	Z

Nakon	nakon	Sg
ovoga	ovaj	Pd-nsg
dobiva	dobivati	Vmr3s
se	sebe	Agpnsay
pravo	pravo	Ncnsa
na	na	Sa
slanje	slanje	Ncnsa
i	i	Cc
čitanje	čitanje	Ncnsa
podataka	podatak	Ncmpg
s	sa	Sg
mjernih	mjerni	Agpnpgy
mjesta	mjesto	Ncnpg
koje	koji	Pi-nsa
su	biti	Var3p
dodijeljeni	dodijeliti	Appmpny
DataSupplieru	datasupplieti	Appfpny
.	.	Z

Npr.	Npr.	Y

select	select	Xf
*	*	Z
from	from	Xf
vremote_meters	vremote_meters	Xf
;	;	Z

Detalji	detalj	Ncmpn
o	o	Sl
parametrima	parametar	Ncmpl
procedure	procedura	Ncfsg
authorize_datasupplier	authorize_datasupplier	Cs
se	sebe	Px--sa
mogu	moći	Vmr3p
naći	naći	Vmn
u	u	Sl
poglavlju	poglavlje	Ncnsl
Pogreška	pogreška	Ncfsn
!	!	Z

Izvor	izvor	Ncmsn
reference	referenca	Ncfsg
nije	biti	Var3s
pronađen	pronaći	Appmsnn
.	.	Z

Slanje	slanje	Ncnsn
podataka	podatak	Ncmpg

Slika	slika	Ncfsn
1	1	Mdc
:	:	Z
Redoslijed	redoslijed	Ncmsn
pozivanja	pozivanje	Ncnsg
procedura	procedura	Ncfpg

Slanje	slanje	Ncnsn
daljinskih	daljinski	Agpnpgy
očitanja	očitanje	Ncnpg

Slanje	slanje	Ncnsn
podataka	podatak	Ncmpg
se	sebe	Px--sa
vrši	vršiti	Vmr3s
pozivanjem	pozivanje	Ncnsi
funkcije	funkcija	Ncfsg
(	(	Z
ne	ne	Qz
procedure	procedura	Ncfsg
!	!	Z
)	)	Z
remote	remoti	Vmr2p
.	.	Z
reading_send	reading_send	Ncmsn
:	:	Z

Kratki	kratak	Agpmsny
primjer	primjer	Ncmsn
slanja	slanje	Ncnsg
je	biti	Var3s
sljedeći	sljedeći	Agpmsny
:	:	Z

sqlplus	sqlplus	Ncfsn
testremote	testremota	Ncfsg
/	/	Z
testremote@testdatabase	testremote@testdatabasa	Ncfsg

exec	exec	Npmsn
remote	remoti	Vmr2p
.	.	Z
authorize_datasupplier	authorize_datasupplier	Ncmsn
(	(	Z
‘	‘	Z
test	test	Ncmsn
’	’	Z
,	,	Z
’	’	Z
test	test	Ncmsan
’	’	Z
,	,	Z
’	’	Z
HR	HR	Y
’	’	Z
)	)	Z
;	;	Z

declare	declara	Ncfpa

l_mtrd	l_mtrd	Xf
number	number	Xf
;	;	Z

begin	Begin	Npmsn

l_mtrd	l_mtrd	Npmsn
:	:	Z
=	=	Z
remote	remot	Ncmpa
.	.	Z
reading_send	reading_send	Ncmsn
(	(	Z
1118084	1118084	Mdc
,	,	Z
‘	‘	Z
HR-10000-1004-7	HR-10000-1004-7	Mdm
’	’	Z
,	,	Z
null	null	Cc
,	,	Z
to_date	to_dati	Vmr2p
(	(	Z
‘	‘	Z
2.2.2013	2.2.2013	Mds
’	’	Z
,	,	Z
’	’	Z
DD	DD	Npmsn
.	.	Z

MM	MM	Npmsn
.	.	Z

YYYY	yyyi	Agpnsny
’	’	Z
)	)	Z
,	,	Z
1527	1527	Mdc
,	,	Z
null	null	Cc
,	,	Z
null	nul	Ncmsl
,	,	Z
null	nul	Ncmsl
,	,	Z
null	nul	Ncmsl
,	,	Z
null	nul	Ncmsl
,	,	Z
null	nul	Ncmsl
,	,	Z
null	null	Cc
,	,	Z
17	17	Mdc
)	)	Z
;	;	Z

end	end	Ncmsn
;	;	Z

select	select	Xf
*	*	Z
from	from	Xf
vremote_meters	vremote_meters	Xf
where	where	Xf
meter_id	meter_id	Xf
=	=	Z
1118084	1118084	Mdc
;	;	Z

select	select	Xf
*	*	Z
from	from	Xf
vremote_meter_readings	vremote_meter_readings	Xf
where	where	Xf
meter_id	meter_id	Xf
=	=	Z
1118084	1118084	Mdc
;	;	Z

select	select	Xf
*	*	Z
from	from	Xf
vremote_meter_counters	vremote_meter_counters	Xf
where	where	Xf
meter_id	meter_id	Xf
=	=	Z
1118084	1118084	Mdc
;	;	Z

Pritom	pritom	Rgp
je	biti	Var3s
potrebno	potreban	Agpnsny
znati	znati	Vmn
METER_ID	METER_ID	Sg
mjernog	mjerni	Agpnsgy
mjesta	mjesto	Ncnsg
u	u	Sl
ISGE	ISG	Npmsl
sustavu	sustav	Ncmsl
te	te	Cc
ISGE	isg	Ncmpa
šifru	šifra	Ncfsa
objekta	objekt	Ncmsg
na	na	Sl
kojem	koji	Pi-msl
se	sebe	Px--sa
mjerno	mjerni	Agpnsny
mjesto	mjesto	Ncnsn
nalazi	nalaziti	Vmr3s
.	.	Z

Povratna	povratan	Agpfsny
informacija	informacija	Ncfsn
je	biti	Var3s
ID	id	Ncmsn
očitanja	očitanje	Ncnsg
dodijeljen	dodijeliti	Appmsnn
(	(	Z
prilikom	prilikom	Sg
primanja	primanje	Ncnsg
podataka	podatak	Ncmpg
)	)	Z
u	u	Sl
ISGE-u	ISGE	Npmsl
.	.	Z

Prilikom	prilikom	Sg
slanja	slanje	Ncnsg
očitanja	očitanje	Ncnsg
moraju	morati	Vmr3p
se	sebe	Px--sa
poslati	poslati	Vmn
svi	sav	Agpmpny
brojači	brojač	Ncmpn
koji	koji	Pi-mpn
se	sebe	Px--sa
prate	pratiti	Vmr3p
(	(	Z
Pogreška	pogreška	Ncfsn
!	!	Z

Izvor	izvor	Ncmsn
reference	referenca	Ncfsg
nije	biti	Var3s
pronađen	pronaći	Appmsnn
.	.	Z
)	)	Z
,	,	Z
dok	dok	Cs
ostali	ostali	Agpmpny
moraju	morati	Vmr3p
imati	imati	Vmn
vrijednost	vrijednost	Ncfsa
null	nule	Ncnsg
!	!	Z

BITNA	bitan	Agpfsny
NAPOMENA	napomena	Ncfsn
:	:	Z
u	u	Sl
slučaju	slučaj	Ncmsl
slanja	slanje	Ncnsg
očitanja	očitanje	Ncnsg
koje	koji	Pi-nsn
je	biti	Var3s
već	već	Rgp
uneseno	unijeti	Appnsny
sustav	sustav	Ncmsn
će	htjeti	Var3s
baciti	baciti	Vmn
exception	exception	Ncmsan
,	,	Z
od	od	Sg
dobavljača	dobavljač	Ncmpg
podataka	podatak	Ncmpg
se	sebe	Px--sa
očekuje	očekivati	Vmr3s
da	da	Cs
prate	pratiti	Vmr3p
koje	koji	Pi-fpn
su	biti	Var3p
podatke	podatak	Ncmpa
poslali	poslati	Vmp-pm
i	i	Cc
da	da	Cs
šalju	slati	Vmr3p
samo	samo	Rgp
nove	nov	Agpmpay
podatke	podatak	Ncmpa
.	.	Z
(	(	Z
U	u	Sl
slučaju	slučaj	Ncmsl
slanja	slanje	Ncnsg
promjena	promjena	Ncfpg
,	,	Z
potrebno	potreban	Agpnsny
je	biti	Var3s
prvo	prvo	Rgp
obrisati	obrisati	Vmn
postojeći	postojeći	Agpmsayn
podatak	podatak	Ncmsan
pa	pa	Cc
poslati	poslati	Vmn
novi	nov	Agpmsayn
.	.	Z
)	)	Z
Slanje	slanje	Ncnsn
prevelike	prevelik	Agpfsgy
količine	količina	Ncfsg
već	već	Rgp
poslanih	poslati	Appmpgy
podataka	podatak	Ncmpg
nepotrebno	nepotreban	Agpnsny
opterećuje	opterećivati	Vmr3s
sustav	sustav	Ncmsan
.	.	Z

Slanje	slanje	Ncnsn
računa	račun	Ncmsg

Računi	račun	Ncmpn
se	sebe	Px--sa
šalju	slati	Vmr3p
na	na	Sa
način	način	Ncmsan
da	da	Cs
se	sebe	Px--sa
prvo	prvo	Rgp
pozove	pozvati	Vmr3s
procedura	procedura	Ncfsn
bill_send_start	bill_send_start	Ncmsn
(	(	Z
nema	nemati	Vmr3s
parametara	parametar	Ncmpg
)	)	Z
,	,	Z
nakon	nakon	Sg
nje	on	Pp3fsg
se	sebe	Px--sa
jednom	jednom	Rgp
zove	zvati	Vmr3s
bill_send_header	bill_send_header	Xf
,	,	Z
te	te	Cc
više	mnogo	Rgc
puta	puta	Rgp
bill_send_data	bill_send_dati	Appfsny
(	(	Z
stavke	stavka	Ncfpa
računa	račun	Ncmsg
)	)	Z
.	.	Z

Na	na	Sl
kraju	kraj	Ncmsl
popisa	popis	Ncmpg
stavki	stavka	Ncfpg
poziva	pozivati	Vmr3s
se	sebe	Px--sa
bill_send_commit	bill_send_commit	Ncmsn
ili	ili	Cc
bill_send_rollback	bill_send_rollback	Agpmsnn
,	,	Z
nakon	nakon	Sg
čega	što	Pi3n-g
slijedi	slijediti	Vmr3s
ponovo	ponovo	Rgp
bill_send_start	bill_send_start	Ncmsan
.	.	Z

Primjer	primjer	Ncmsn
slanja	slanje	Ncnsg
:	:	Z

declare	declara	Ncfpa

new_bill_id	new_bill_id	Xf
number	number	Xf
;	;	Z

begin	Begin	Npmsn

remote	remote	I
.	.	Z
authorize_datasupplier	authorize_datasupplier	Ncmsn
(	(	Z
‘	‘	Z
test	test	Ncmsn
’	’	Z
,	,	Z
’	’	Z
test	test	Ncmsan
’	’	Z
,	,	Z
’	’	Z
HR	HR	Y
’	’	Z
)	)	Z
;	;	Z

remote	remote	Qr
.	.	Z
bill_send_start	bill_send_start	Ncmsan
;	;	Z

remote	remote	I
.	.	Z
bill_send_header	bill_send_header	Ncmsn
(	(	Z
2157892	2157892	Mdc
,	,	Z
’	’	Z
HR-10000-1004-0	HR-10000-1004-0	Mdm
’	’	Z
,	,	Z
’	’	Z
BrodPlin	BrodPlin	Npmsn
’	’	Z
,	,	Z
‘	‘	Z
Heat	Heat	Npmsn
’	’	Z
,	,	Z
1061449	1061449	Mdc
,	,	Z
to_date	to_dati	Vmr2p
(	(	Z
‘	‘	Z
3.1.2011	3.1.2011	Mds
’	’	Z
,	,	Z
’	’	Z
DD	DD	Npmsn
.	.	Z

MM	MM	Npmsn
.	.	Z

YYYY	yyyi	Agpnsny
’	’	Z
)	)	Z
,	,	Z
to_date	to_dati	Vmr2p
(	(	Z
‘	‘	Z
5.2.2011	5.2.2011	Mds
’	’	Z
,	,	Z
’	’	Z
DD	DD	Npmsn
.	.	Z

MM	MM	Npmsn
.	.	Z

YYYY	yyyi	Agpnsny
’	’	Z
)	)	Z
,	,	Z
1,2011	1,2011	Mdc
,	,	Z
’	’	Z
05521203	05521203	Mdc
-	-	Z
04	04	Mdc
’	’	Z
,	,	Z
121	121	Mdc
)	)	Z
;	;	Z

remote	remote	I
.	.	Z
bill_send_data	bill_send_dati	Appfsny
(	(	Z
‘	‘	Z
Heating	Heating	Xf
’	’	Z
,	,	Z
51,2,25	51,2,25	Mdc
)	)	Z
;	;	Z

remote	remote	I
.	.	Z
bill_send_data	bill_send_dati	Appfsny
(	(	Z
‘	‘	Z
LeasedPower	LeasedPower	Npmsn
’	’	Z
,	,	Z
150,0.23,25	150,0.23,25	Mdc
)	)	Z
;	;	Z

new_bill_id	new_bill_id	Npmsn
:	:	Z
=	=	Z
remote	remot	Ncmpa
.	.	Z
bill_send_commit	bill_send_commit	Ncfsn
;	;	Z

end	end	Ncmsn
;	;	Z

Prvo	prvo	Rgp
je	biti	Var3s
potrebno	potreban	Agpnsny
autorizirati	autorizirati	Vmn
se	sebe	Px--sa
na	na	Sa
sustav	sustav	Ncmsan
,	,	Z
to	taj	Pd-nsn
je	biti	Var3s
potrebno	potreban	Agpnsny
napraviti	napraviti	Vmn
samo	samo	Rgp
jednom	jednom	Rgp
.	.	Z

Prije	prije	Sg
slanja	slanje	Ncnsg
svakog	svaki	Pi-msg
računa	račun	Ncmsg
potrebno	potreban	Agpnsny
je	biti	Var3s
pozvati	pozvati	Vmn
proceduru	procedura	Ncfsa
bill_send_start	bill_send_start	Ncmsan
,	,	Z

